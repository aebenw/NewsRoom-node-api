{"version":3,"sources":["../../../server/graphql/dataSources/newsAPI.js"],"names":["NewsAPI","RESTDataSource","constructor","baseURL","key","process","env","NEWS_API","getSources","response","get","sources","map","source","sourceReducer","getLatestArticles","articles","article","articleReducer","id","name","description","url","givenID","title"],"mappings":";;;;;;;AAAA;;AACA;;AAEA,MAAMA,OAAN,SAAsBC,oCAAtB,CAAqC;AACnCC,EAAAA,WAAW,GAAE;AACX;AACA,SAAKC,OAAL,GAAe,yBAAf;AACA,SAAKC,GAAL,GAAY,UAASC,OAAO,CAACC,GAAR,CAAYC,QAAS,EAA1C;AACD;;AAED,QAAMC,UAAN,GAAkB;AAChB,QAAIC,QAAQ,GAAG,MAAM,KAAKC,GAAL,CAAU,WAAU,KAAKN,GAAI,EAA7B,CAArB;AACA,WAAOK,QAAQ,CAACE,OAAT,CAAiBC,GAAjB,CAAqBC,MAAM,IAAI,KAAKC,aAAL,CAAmBD,MAAnB,CAA/B,CAAP;AACD;;AAED,QAAME,iBAAN,GAAyB;AACvB,QAAIN,QAAQ,GAAG,MAAM,KAAKC,GAAL,CAAU,mEAAD,GAAuE,GAAE,KAAKN,GAAI,EAA3F,CAArB;AACA,WAAOK,QAAQ,CAACO,QAAT,CAAkBJ,GAAlB,CAAsBK,OAAO,IAAI,KAAKC,cAAL,CAAoBD,OAApB,CAAjC,CAAP;AACD;;AAEDH,EAAAA,aAAa,CAACD,MAAD,EAAQ;AACnB,UAAM;AAACM,MAAAA,EAAD;AAAKC,MAAAA,IAAL;AAAWC,MAAAA,WAAX;AAAwBC,MAAAA;AAAxB,QAA+BT,MAArC;AACA,WAAO;AACLU,MAAAA,OAAO,EAAEJ,EADJ;AAELC,MAAAA,IAFK;AAGLC,MAAAA,WAHK;AAILC,MAAAA;AAJK,KAAP;AAMD;;AAEDJ,EAAAA,cAAc,CAACD,OAAD,EAAS;AACrB,UAAM;AAAEO,MAAAA;AAAF,QAAYP,OAAlB;AACA,WAAO;AACLO,MAAAA;AADK,KAAP;AAGD;;AAhCkC;;eAoCtBxB,O","sourcesContent":["import { RESTDataSource } from 'apollo-datasource-rest';\nimport { API } from '../../constants/api'\n\nclass NewsAPI extends RESTDataSource {\n  constructor(){\n    super();\n    this.baseURL = \"https://newsapi.org/v2/\"\n    this.key = `apiKey=${process.env.NEWS_API}`\n  }\n\n  async getSources(){\n    let response = await this.get(`sources?${this.key}`)\n    return response.sources.map(source => this.sourceReducer(source))\n  }\n\n  async getLatestArticles(){\n    let response = await this.get(`top-headlines?language=en&country=us&category=general&pageSize=5&` + `${this.key}`)\n    return response.articles.map(article => this.articleReducer(article))\n  }\n\n  sourceReducer(source){\n    const {id, name, description, url} = source\n    return {\n      givenID: id,\n      name,\n      description,\n      url\n    }\n  }\n\n  articleReducer(article){\n    const { title } = article\n    return {\n      title\n    }\n  }\n\n}\n\nexport default NewsAPI\n"],"file":"newsAPI.js"}