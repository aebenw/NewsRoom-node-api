{"version":3,"sources":["../../server/middleware/index.js"],"names":["authenticate","req","res","next","token","body","User","findByToken","then","user","Promise","reject","catch","e","status","send"],"mappings":";;;;;;;AAAA;;AAEO,MAAMA,YAAY,GAAG,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AAC9C,MAAIC,KAAK,GAAGH,GAAG,CAACI,IAAJ,CAASD,KAArB;;AAEAE,eAAKC,WAAL,CAAiBH,KAAjB,EAAwBI,IAAxB,CAA8BC,IAAD,IAAU;AACrC,QAAI,CAACA,IAAL,EAAW;AACT,aAAOC,OAAO,CAACC,MAAR,EAAP;AACD;;AAEDV,IAAAA,GAAG,CAACQ,IAAJ,GAAWA,IAAX;AACAR,IAAAA,GAAG,CAACG,KAAJ,GAAYA,KAAZ;AACAD,IAAAA,IAAI;AACL,GARD,EAQGS,KARH,CAQUC,CAAD,IAAO;AACdX,IAAAA,GAAG,CAACY,MAAJ,CAAW,GAAX,EAAgBC,IAAhB;AACD,GAVD;AAWD,CAdM","sourcesContent":["import {User} from '../models';\n\nexport const authenticate = (req, res, next) => {\n  var token = req.body.token;\n\n  User.findByToken(token).then((user) => {\n    if (!user) {\n      return Promise.reject();\n    }\n\n    req.user = user;\n    req.token = token;\n    next();\n  }).catch((e) => {\n    res.status(401).send();\n  });\n};\n"],"file":"index.js"}