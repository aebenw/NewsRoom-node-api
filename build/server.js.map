{"version":3,"sources":["../server/server.js"],"names":["require","express","mongoose","bodyParser","PORT","process","env","app","routes","use","json","allowedOrigins","origin","callback","indexOf","msg","Error","passport","initialize","session","listen","console","log"],"mappings":";;;;;;;;;;;;;AAIA;;AACA;;AACA;;;;AANAA,OAAO,CAAC,iBAAD,CAAP;;AACA,MAAMC,OAAO,GAAGD,OAAO,CAAC,SAAD,CAAvB;;AACA,MAAME,QAAQ,GAAIF,OAAO,CAAC,eAAD,CAAzB;;AACA,MAAMG,UAAU,GAAGH,OAAO,CAAC,aAAD,CAA1B;;AAKA;AACA;AACA;AAEA,MAAMI,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYF,IAAzB;AACA,MAAMG,GAAG,GAAGN,OAAO,EAAnB;;;AACA,MAAMO,MAAM,GAAGR,OAAO,CAAC,iBAAD,CAAtB;;AAEAO,GAAG,CAACE,GAAJ,CAAQN,UAAU,CAACO,IAAX,EAAR;AACA,MAAMC,cAAc,GAAG,CACrB,uBADqB,EAErB,6CAFqB,CAAvB;AAKAJ,GAAG,CAACE,GAAJ,CAAQ,mBAAK;AACXG,EAAAA,MAAM,EAAE,UAASA,MAAT,EAAiBC,QAAjB,EAA0B;AAChC,QAAG,CAACD,MAAJ,EAAY,OAAOC,QAAQ,CAAC,IAAD,EAAO,IAAP,CAAf;;AACZ,QAAGF,cAAc,CAACG,OAAf,CAAuBF,MAAvB,MAAmC,CAAC,CAAvC,EAAyC;AACvC,YAAMG,GAAG,GAAG,4CACF,yCADV;AAEA,aAAOF,QAAQ,CAAC,IAAIG,KAAJ,CAAUD,GAAV,CAAD,EAAiB,KAAjB,CAAf;AACD;;AACD,WAAOF,QAAQ,CAAC,IAAD,EAAO,IAAP,CAAf;AACD;AATU,CAAL,CAAR;AAYAN,GAAG,CAACE,GAAJ,CAAQQ,kBAASC,UAAT,EAAR;AACAX,GAAG,CAACE,GAAJ,CAAQQ,kBAASE,OAAT,EAAR;AACAZ,GAAG,CAACE,GAAJ,CAAQN,UAAU,CAACO,IAAX,EAAR;AAEAF,MAAM,CAACD,GAAD,CAAN;AAEAA,GAAG,CAACa,MAAJ,CAAWhB,IAAI,IAAI,IAAnB,EAAyB,MAAMiB,OAAO,CAACC,GAAR,CAAa,iBAAgBlB,IAAK,EAAlC,CAA/B,E,CAOA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["require('./config/config')\nconst express = require('express');\nconst mongoose  = require('./db/mongoose');\nconst bodyParser = require('body-parser');\nimport cors from 'cors';\nimport session from 'express-session';\nimport passport from 'passport'\n\n// ******** FEATURES NOT READY FOR PRODUCTION\n// import server from './graph'\n// const RedisStore = require('connect-redis')(session);\n\nconst PORT = process.env.PORT\nconst app = express();\nconst routes = require('./routes/routes');\n\napp.use(bodyParser.json());\nconst allowedOrigins = [\n  'http://localhost:3000',\n  'https://protected-bayou-40913.herokuapp.com'\n];\n\napp.use(cors({\n  origin: function(origin, callback){\n    if(!origin) return callback(null, true);\n    if(allowedOrigins.indexOf(origin) === -1){\n      const msg = 'The CORS policy for this site does not ' +\n                'allow access from the specified Origin.';\n      return callback(new Error(msg), false);\n    }\n    return callback(null, true);\n  }\n}));\n\napp.use(passport.initialize())\napp.use(passport.session())\napp.use(bodyParser.json())\n\nroutes(app);\n\napp.listen(PORT || 3001, () => console.log(`started up on ${PORT}`));\n\nexport {\n  app,\n  passport\n};\n\n// ---------- WORK WITH CACHED SESSIONS FOR USERS\n// app.use(session({\n//   secret: \"worldly\",\n//   store: new RedisStore({ host: 'localhost', port: 6379, client, ttl :  260}),\n//   resave: true,\n//   saveUninitialized: false\n// }))\n"],"file":"server.js"}