{"version":3,"sources":["../server/server.js"],"names":["require","express","mongoose","bodyParser","RedisStore","session","PORT","process","env","client","redis","createClient","on","console","log","app","routes","use","json","allowedOrigins","origin","callback","indexOf","msg","Error","secret","store","host","port","ttl","resave","saveUninitialized","passport","initialize","listen"],"mappings":";;;;;;;;;;;;;AAIA;;AACA;;AAEA;;AACA;;AACA;;AACA;;;;AAVAA,OAAO,CAAC,iBAAD,CAAP;;AACA,MAAMC,OAAO,GAAGD,OAAO,CAAC,SAAD,CAAvB;;AACA,MAAME,QAAQ,GAAIF,OAAO,CAAC,eAAD,CAAzB;;AACA,MAAMG,UAAU,GAAGH,OAAO,CAAC,aAAD,CAA1B;;AAGA,MAAMI,UAAU,GAAGJ,OAAO,CAAC,eAAD,CAAP,CAAyBK,uBAAzB,CAAnB;;AAKA,MAAMC,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYF,IAAzB,C,CAEA;AAGA;;AAEA,IAAIG,MAAM,GAAGC,eAAMC,YAAN,EAAb;;;AACAF,MAAM,CAACG,EAAP,CAAU,SAAV,EAAqB,MAAM;AACzBC,EAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ;AACD,CAFD;AAIA,MAAMC,GAAG,GAAGd,OAAO,EAAnB;;;AACA,MAAMe,MAAM,GAAGhB,OAAO,CAAC,iBAAD,CAAtB;;AAEAe,GAAG,CAACE,GAAJ,CAAQd,UAAU,CAACe,IAAX,EAAR;AACA,MAAMC,cAAc,GAAG,CAAC,uBAAD,EACD,6CADC,CAAvB;AAGAJ,GAAG,CAACE,GAAJ,CAAQ,mBAAK;AACXG,EAAAA,MAAM,EAAE,UAASA,MAAT,EAAiBC,QAAjB,EAA0B;AAChC,QAAG,CAACD,MAAJ,EAAY,OAAOC,QAAQ,CAAC,IAAD,EAAO,IAAP,CAAf;;AACZ,QAAGF,cAAc,CAACG,OAAf,CAAuBF,MAAvB,MAAmC,CAAC,CAAvC,EAAyC;AACvC,YAAMG,GAAG,GAAG,4CACF,yCADV;AAEA,aAAOF,QAAQ,CAAC,IAAIG,KAAJ,CAAUD,GAAV,CAAD,EAAiB,KAAjB,CAAf;AACD;;AACD,WAAOF,QAAQ,CAAC,IAAD,EAAO,IAAP,CAAf;AACD;AATU,CAAL,CAAR;AAYAN,GAAG,CAACE,GAAJ,CAAQ,6BAAQ;AACdQ,EAAAA,MAAM,EAAE,SADM;AAEdC,EAAAA,KAAK,EAAE,IAAItB,UAAJ,CAAe;AAAEuB,IAAAA,IAAI,EAAE,WAAR;AAAqBC,IAAAA,IAAI,EAAE,IAA3B;AAAiCnB,IAAAA,MAAjC;AAAyCoB,IAAAA,GAAG,EAAI;AAAhD,GAAf,CAFO;AAGdC,EAAAA,MAAM,EAAE,IAHM;AAIdC,EAAAA,iBAAiB,EAAE;AAJL,CAAR,CAAR;AAMAhB,GAAG,CAACE,GAAJ,CAAQe,kBAASC,UAAT,EAAR;AACAlB,GAAG,CAACE,GAAJ,CAAQe,kBAAS3B,OAAT,EAAR;AACAU,GAAG,CAACE,GAAJ,CAAQd,UAAU,CAACe,IAAX,EAAR;AAEAF,MAAM,CAACD,GAAD,CAAN;AAEAA,GAAG,CAACmB,MAAJ,CAAW5B,IAAI,IAAI,IAAnB,EAAyB,MAAMO,OAAO,CAACC,GAAR,CAAY,yBAAZ,CAA/B","sourcesContent":["require('./config/config')\nconst express = require('express');\nconst mongoose  = require('./db/mongoose');\nconst bodyParser = require('body-parser');\nimport server from './graph'\nimport session from 'express-session';\nconst RedisStore = require('connect-redis')(session);\nimport cors from 'cors';\nimport passport from 'passport'\nimport redis from 'redis'\nimport https from 'https'\nconst PORT = process.env.PORT\n\n// Promise.new(https.get(\"https://en.wikipedia.org/w/api.php?action=parse&section=0&prop=text&format=json&page=pizza\")\n\n\n//Creat Redis Client\n\nlet client = redis.createClient();\nclient.on('connect', () => {\n  console.log('connected to Redis')\n})\n\nconst app = express();\nconst routes = require('./routes/routes');\n\napp.use(bodyParser.json());\nconst allowedOrigins = ['http://localhost:3000',\n                      'https://protected-bayou-40913.herokuapp.com'];\n\napp.use(cors({\n  origin: function(origin, callback){\n    if(!origin) return callback(null, true);\n    if(allowedOrigins.indexOf(origin) === -1){\n      const msg = 'The CORS policy for this site does not ' +\n                'allow access from the specified Origin.';\n      return callback(new Error(msg), false);\n    }\n    return callback(null, true);\n  }\n}));\n\napp.use(session({\n  secret: \"worldly\",\n  store: new RedisStore({ host: 'localhost', port: 6379, client, ttl :  260}),\n  resave: true,\n  saveUninitialized: false\n}))\napp.use(passport.initialize())\napp.use(passport.session())\napp.use(bodyParser.json())\n\nroutes(app);\n\napp.listen(PORT || 3001, () => console.log(\"started up on port 3001\"));\n\nexport {\n  app,\n  client,\n  passport\n};\n"],"file":"server.js"}