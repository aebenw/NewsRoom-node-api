{"version":3,"sources":["../server/server.js"],"names":["require","express","mongoose","bodyParser","PORT","process","env","RedisStore","session","app","routes","use","json","allowedOrigins","origin","callback","indexOf","msg","Error","passport","initialize","listen","console","log"],"mappings":";;;;;;;;;;;;;AAIA;;AAMA;;AAEA;;;;AAZAA,OAAO,CAAC,iBAAD,CAAP;;AACA,MAAMC,OAAO,GAAGD,OAAO,CAAC,SAAD,CAAvB;;AACA,MAAME,QAAQ,GAAIF,OAAO,CAAC,eAAD,CAAzB;;AACA,MAAMG,UAAU,GAAGH,OAAO,CAAC,aAAD,CAA1B;;AAEA,MAAMI,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYF,IAAzB,C,CAEA;AACA;AACA;;AAEA,MAAMG,UAAU,GAAGP,OAAO,CAAC,eAAD,CAAP,CAAyBQ,uBAAzB,CAAnB;;AAIA;AAEA;AACA;AACA;AACA;AAEA,MAAMC,GAAG,GAAGR,OAAO,EAAnB;;;AACA,MAAMS,MAAM,GAAGV,OAAO,CAAC,iBAAD,CAAtB;;AAEAS,GAAG,CAACE,GAAJ,CAAQR,UAAU,CAACS,IAAX,EAAR;AACA,MAAMC,cAAc,GAAG,CAAC,uBAAD,EACD,6CADC,CAAvB;AAGAJ,GAAG,CAACE,GAAJ,CAAQ,mBAAK;AACXG,EAAAA,MAAM,EAAE,UAASA,MAAT,EAAiBC,QAAjB,EAA0B;AAChC,QAAG,CAACD,MAAJ,EAAY,OAAOC,QAAQ,CAAC,IAAD,EAAO,IAAP,CAAf;;AACZ,QAAGF,cAAc,CAACG,OAAf,CAAuBF,MAAvB,MAAmC,CAAC,CAAvC,EAAyC;AACvC,YAAMG,GAAG,GAAG,4CACF,yCADV;AAEA,aAAOF,QAAQ,CAAC,IAAIG,KAAJ,CAAUD,GAAV,CAAD,EAAiB,KAAjB,CAAf;AACD;;AACD,WAAOF,QAAQ,CAAC,IAAD,EAAO,IAAP,CAAf;AACD;AATU,CAAL,CAAR,E,CAYA;AACA;AACA;AACA;AACA;AACA;;AACAN,GAAG,CAACE,GAAJ,CAAQQ,kBAASC,UAAT,EAAR;AACAX,GAAG,CAACE,GAAJ,CAAQQ,kBAASX,OAAT,EAAR;AAEAC,GAAG,CAACE,GAAJ,CAAQR,UAAU,CAACS,IAAX,EAAR;AAEAF,MAAM,CAACD,GAAD,CAAN;AAEAA,GAAG,CAACY,MAAJ,CAAWjB,IAAI,IAAI,IAAnB,EAAyB,MAAMkB,OAAO,CAACC,GAAR,CAAY,yBAAZ,CAA/B","sourcesContent":["require('./config/config')\nconst express = require('express');\nconst mongoose  = require('./db/mongoose');\nconst bodyParser = require('body-parser');\nimport cors from 'cors';\nconst PORT = process.env.PORT\n\n// ******** FEATURES NOT READY FOR PRODUCTION\n// import server from './graph'\n// import redis from 'redis'\nimport session from 'express-session';\nconst RedisStore = require('connect-redis')(session);\nimport passport from 'passport'\n\n\n//Create Redis Client\n\n// let client = redis.createClient();\n// client.on('connect', () => {\n//   console.log('connected to Redis')\n// })\n\nconst app = express();\nconst routes = require('./routes/routes');\n\napp.use(bodyParser.json());\nconst allowedOrigins = ['http://localhost:3000',\n                      'https://protected-bayou-40913.herokuapp.com'];\n\napp.use(cors({\n  origin: function(origin, callback){\n    if(!origin) return callback(null, true);\n    if(allowedOrigins.indexOf(origin) === -1){\n      const msg = 'The CORS policy for this site does not ' +\n                'allow access from the specified Origin.';\n      return callback(new Error(msg), false);\n    }\n    return callback(null, true);\n  }\n}));\n\n// app.use(session({\n//   secret: \"worldly\",\n//   store: new RedisStore({ host: 'localhost', port: 6379, client, ttl :  260}),\n//   resave: true,\n//   saveUninitialized: false\n// }))\napp.use(passport.initialize())\napp.use(passport.session())\n\napp.use(bodyParser.json())\n\nroutes(app);\n\napp.listen(PORT || 3001, () => console.log(\"started up on port 3001\"));\n\nexport {\n  app,\n  passport\n  // client\n};\n"],"file":"server.js"}